!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=534)}({534:function(t,e,i){"use strict";i.r(e);var r=function(t,e,i){var r;void 0===i&&(i=null),e.id="og_"+Date.now();var n=function(t){if(!t.type.startsWith("video"))return"";switch(t.host){case"tv.kakao.com":return"kakaotv";case"vimeo.com":return"vimeo";case"www.youtube.com":return"youtube"}}(t);if(n){var o=function(t,e){void 0===e&&(e=860);var i={width:0,height:0};if(""!==t&&(t.split("?")[1].split("&").reduce(function(t,e){var i=e.split("=");return t[i[0]]=i[1],t},i),i.width>e)){var r=i.height/i.width;i.width=e,i.height=Math.round(i.width*r)}return i}(t.image&&t.image.length>0?t.image[0]:"",i);e.setAttribute("data-ke-type","video"),e.setAttribute("data-ke-mobileStyle","widthContent"),e.setAttribute("data-ke-style","alignCenter"),e.setAttribute("data-video-host",n),e.setAttribute("data-video-url",t.url),e.setAttribute("data-video-thumbnail",t.image),e.setAttribute("data-source-url",t.source_url),e.setAttribute("data-video-width",o.width),e.setAttribute("data-video-height",o.height),e.setAttribute("data-video-origin-width",o.width),e.setAttribute("data-video-origin-height",o.height),r="<img width="+o.width+" height="+o.height+' src="'+t.image+'"></img><span><br></span>'}else e.setAttribute("data-ke-type","opengraph"),e.setAttribute("data-og-type",t.type),e.setAttribute("data-og-title",t.title),e.setAttribute("data-og-description",t.description),e.setAttribute("data-og-host",t.host),e.setAttribute("data-og-source-url",t.source_url),e.setAttribute("data-og-url",t.url),e.setAttribute("data-og-image",t.image),r=' \n      <a href="'+t.requested_url+'" target="_blank" data-source-url="'+t.source_url+'">\n        <div class="og-image" style="background-image:url('+t.image+')"></div>\n        <div class="og-text">\n          <p class="og-title">'+t.title+'</p>\n          <p class="og-desc">'+t.description+'</p>\n          <p class="og-host">'+t.host+"</p>\n        </div>\n      </a>\n    ";return r};function n(t,e,i){var r=t.dom.create("p");r.innerHTML='<br data-mce-bogus="1">',t.dom.insertAfter(r,i),e.setStart(r,0),e.setEnd(r,0),t.selection.setRng(e)}function o(t,e,i){if(e){var r=e.getAttribute("href"),o=r.startsWith("http")?r:"http://"+r,s=t.dom.getParent(t.selection.getNode(),"body > *");if(t.dom.is(s,"table"))n(t,i,e);else{if(s.nextSibling&&"FIGURE"===s.nextSibling.nodeName&&s.nextSibling.getAttribute("data-ke-type").startsWith("opengraph")){var u=s.nextSibling.querySelector("a")||s.nextSibling;if(u&&u.getAttribute("data-source-url")===o)return void n(t,i,s)}a(t,o,e,i)}}}function a(t,e,i,o,a){i||(i=t.selection.getNode(),o=t.selection.getSel().getRangeAt(0));var s=document.createElement("figure");s.setAttribute("contenteditable","false"),s.className="og-loading",s.textContent="불러오는 중입니다...",t.dom.insertAfter(s,t.dom.getParent(i,"body > *, body > div > *")),s.nextSibling||n(t,o,s),t.settings.opengraph.fetch_handler(e,function(i){if(i.source_url&&""!==i.source_url||(i.source_url=e),0!==i.code)t.dom.remove(s);else{a=a||(t.settings.video&&t.settings.video.service_name||"kakao_tv");var n=t.getBody().offsetWidth,o=n;t.settings.autoresize_overflow_padding&&(n-=2*t.settings.autoresize_overflow_padding),t.settings.video&&t.settings.video.max_width&&(o=Math.min(t.settings.video.max_width,n)),s.innerHTML=r(i,s,o),s.removeAttribute("class");var u=s.getAttribute("data-video-host");u&&a&&"kakaotv"==u&&s.setAttribute("data-video-play-service",a)}t.undoManager.add()})}var s=function(t){var e,i=t.startContainer,r=t.startOffset;if("A"===i.nodeName&&(e=i),"#text"!==i.nodeName){var n=r===i.childNodes.length?i.lastChild:i.childNodes[r];if(!n)return;"A"===n.nodeName?e=n:n.previousSibling&&"A"===n.previousSibling.nodeName?e=n.previousSibling:n.previousSibling&&n.previousSibling.previousSibling&&"A"===n.previousSibling.previousSibling.nodeName&&(e=n.previousSibling.previousSibling)}else"A"===i.parentNode.nodeName&&(e=i.parentNode),1===i.textContent.length&&i.textContent[0].search(/[\s]/)>-1&&i.previousSibling&&"A"===i.previousSibling.nodeName&&(e=i.previousSibling);return e},u=function(){function t(t){this.parserCommandPrefix="GetHTMLByCDM_",this.CDMTypeName="opengraph",this.parserCommand=this.parserCommandPrefix+this.CDMTypeName,this.editor=t}return t.prototype.register=function(){var t=this;this.editor.addCommand(this.parserCommand,function(e){var i=e.htmlArray,r=e.item,n=t.getHTMLStringByCDM(r.attribute);i.push(n)})},t.prototype.getFigureNode=function(t){var e=document.createElement("figure");return e.setAttribute("data-ke-type",this.CDMTypeName),e.setAttribute("data-og-title",t.title),t.desc&&e.setAttribute("data-og-description",t.desc),e.setAttribute("data-og-host",t.host),e.setAttribute("data-og-source-url",t.sourceUrl),t.image&&e.setAttribute("data-og-image",t.image),e.setAttribute("data-og-url",t.url),e},t.prototype.getOpengraphContentsNode=function(t){var e=document.createElement("a");e.setAttribute("href",t.url),e.setAttribute("target","_blank"),e.setAttribute("data-source-url",t.sourceUrl);var i=document.createElement("div");i.setAttribute("class","og-image"),t.image&&i.setAttribute("style","background-image:url("+t.image+")");var r=document.createElement("div");return r.setAttribute("class","og-text"),r.appendChild(this.getOpengraphItem("og-title",t.title)),t.desc&&r.appendChild(this.getOpengraphItem("og-desc",t.desc)),r.appendChild(this.getOpengraphItem("og-host",t.host)),e.appendChild(i),e.appendChild(r),e},t.prototype.getOpengraphItem=function(t,e){var i=document.createElement("p");return i.setAttribute("class",t),i.innerText=e,i},t.prototype.getHTMLStringByCDM=function(t){var e=this.getFigureNode(t),i=this.getOpengraphContentsNode(t);return e.appendChild(i),e.outerHTML},t}(),d=function(t){new u(t).register();t.addCommand("makeOpengraph",function(){var e=t.selection.getSel().getRangeAt(0),i=s(e);o(t,i,e)}),t.addCommand("makeOpengraphWithUrl",function(e){a(t,e)}),t.addCommand("makeOpengraphWithKakaoTvService",function(e,i){a(t,e,null,null,i)}),t.on("PreProcess",function(e){var i=(0,t.dom.$)(".og-loading",e.node);i.length>0&&t.dom.remove(i)}),t.on("keyDown",function(e){if(13===e.keyCode){var i=t.selection.getSel().getRangeAt(0),r=s(i);r&&!/^tel:/.test(r.getAttribute("href"))&&(e.preventDefault(),o(t,r,i))}})};window.tinymce.PluginManager.add("newOg",d)}});